<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IPTC Übersetzer</title>
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>
    <main>
        <h1>IPTC Metadaten Übersetzer</h1>

        <form id="upload-form">
            <label for="image-upload">Bilddatei auswählen:</label>
            <input type="file" id="image-upload" name="image" accept="image/jpeg, image/tiff, image/png, image/gif, image/heic, image/avif" required>
            <button type="submit">Metadaten auslesen</button>
        </form>

        <hr>

        <div id="results-container" style="display: none;">
            <h2>Review & Übersetzung</h2>

            <fieldset id="tag-selection-fieldset" class="tag-selection">
                 <legend>Angezeigte Tags auswählen:</legend>
                 <div id="tag-selection-options">
                     </div>
                 <div class="tag-selection-actions">
                    <button type="button" id="select-all-tags">Alle auswählen</button>
                    <button type="button" id="deselect-all-tags">Alle abwählen</button>
                    <button type="button" id="select-common-tags">Gängige auswählen</button>
                    <button type="button" id="update-display-button">Anzeige aktualisieren</button>
                 </div>
            </fieldset>

            <div class="language-selection">
                <label for="target-language">Zielsprache für Übersetzung:</label>
                <select id="target-language" name="target-language">
                    <option value="">Lade Sprachen...</option> 
                </select>
            </div>

            <form id="edit-form">
                <div class="form-columns">
                    <div class="column" id="original-column">
                        <h3>Original / Bearbeitet</h3>
                        <div id="original-fields-container" class="fields-container"></div>
                    </div>
                    <div class="column" id="translation-column">
                        <h3>Übersetzung (<span id="translation-target-lang-label">DE</span>)</h3>
                        <div id="translated-fields-container" class="fields-container"></div>
                    </div>
                </div>
                <fieldset class="export-options">
                    <legend>Exportformat auswählen:</legend>
                    <label>
                        <input type="radio" name="export-format" value="image" checked> Neue Bilddatei (.jpg)
                    </label>
                    <label>
                        <input type="radio" name="export-format" value="json"> Metadaten (.json)
                    </label>
                    <label>
                        <input type="radio" name="export-format" value="zip"> ZIP-Archiv (mit Bilddatei)
                    </label>
                </fieldset>

                <div class="form-actions">
                    <button type="button" id="translate-button">Ausgewählte übersetzen</button>
                    <button type="submit" id="export-edited-button" class="export-button">Bearbeitete Originale speichern</button>
                    <button type="submit" id="export-translated-button" class="export-button">Übersetzung speichern</button>
                </div>
            </form>
        </div>
    </main>

    <script src="/frontend/main.js" defer></script>
</body>
</html>